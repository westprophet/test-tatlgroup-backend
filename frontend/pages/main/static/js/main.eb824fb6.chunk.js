(this["webpackJsonptatlgroup-frontend"]=this["webpackJsonptatlgroup-frontend"]||[]).push([[0],{64:function(e,t,n){},65:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),o=n.n(c),u=(n(64),n(65),n(140)),i=n(38),s=n(11),l=n.n(s),p=n(52),h=n(15),d=n(29),m=n(129),f=n(132),b=n(135),v=n(139),j=n(138),g=n(134),O=n(136),x=n(141),y=n(137),w=n(47),I=n.n(w),S=n(18),k=n.n(S),P="v1",C="",T=1,_="".concat("https://tatl-test.redw.me",":").concat(C,"/").concat(P,"/").concat(T);function N(){return E.apply(this,arguments)}function E(){return(E=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat(_,"/schoolboys"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(){return F.apply(this,arguments)}function F(){return(F=Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat(_,"/column"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function H(){return R.apply(this,arguments)}function R(){return(R=Object(h.a)(l.a.mark((function e(){var t,n,r=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:null,e.prev=1,e.next=4,k.a.get("".concat(_,"/rate"),{params:{SchoolboyId:t}});case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function W(){return(W=Object(h.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("".concat(_,"/UnRate"),{SchoolboyId:t,ColumnId:n});case 3:return r=e.sent,e.abrupt("return",r.status);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(){return(B=Object(h.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("".concat(_,"/rate"),{SchoolboyId:t,ColumnId:n,Title:"H"});case 3:return r=e.sent,e.abrupt("return",r.status);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var M=n(9);function A(e,t,n,r){var a,c,o="".concat(null!==(a=t.FirstName)&&void 0!==a?a:""," ").concat(null!==(c=t.SecondName)&&void 0!==c?c:"","  ").concat(t.LastName),u={id:t.Id,number:String(e),name:o};return r.forEach((function(e){var t=n.find((function(t){return t.ColumnId===e.Id}));u[e.Title]=t?t.Title:""})),u}var D=Object(m.a)({root:{width:"100%"},container:{maxHeight:"calc(100vh - 60px)"},cell:{transition:".3s",cursor:"pointer","&:hover":{transition:".3s",backgroundColor:"grey",color:"white"}},rightLine:{borderRight:"1px solid rgba(224, 224, 224, 1)"}}),J=[{column_id:"number",name:"number",label:"N",minWidth:20},{column_id:"name",name:"name",label:"\u0423\u0447\u0435\u043d\u0438\u043a",minWidth:150}];var U=function(){var e=a.a.useState(!0),t=Object(d.a)(e,2),n=t[0],c=t[1],o=a.a.useState(),u=Object(d.a)(o,2),s=u[0],m=u[1],w=Object(r.useRef)(),S=function(){var e=Object(h.a)(l.a.mark((function e(){var t,n,r,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:return t=e.sent,e.next=5,H();case 5:return n=e.sent,e.next=8,N();case 8:if(r=e.sent,t&&n&&r){e.next=11;break}return e.abrupt("return");case 11:a=r.Items.map((function(e,r){return A(++r,e,n.Items.filter((function(t){return e.Id===t.SchoolboyId})),t.Items)})),c=[].concat(J,Object(p.a)(t.Items.map((function(e){return{column_id:(t=e).Id,name:t.Title,label:t.Title,align:"center"};var t})))),m(c&&a?{columns:c,rows:a}:void 0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=D();Object(r.useEffect)((function(){return S().then((function(e){c(!1)})),w.current=setInterval((function(){S().then((function(e){console.log("\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e")}))}),3e3),function(){clearInterval(w.current)}}),[]);var P=a.a.useState(0),C=Object(d.a)(P,2),T=C[0],_=C[1],E=a.a.useState(25),F=Object(d.a)(E,2),R=F[0],U=F[1];if(n)return Object(M.jsx)("h1",{style:{lineHeight:"100vh"},children:" \u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430... "});if(!s)return Object(M.jsx)("h1",{style:{lineHeight:"100vh"},children:"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442 \u043d\u043e \u0432\u044b \u0434\u0435\u0440\u0436\u0438\u0442\u0435\u0441\u044c! \u041d\u0443 \u0438\u043b\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0435\u0440\u0432\u0435\u0440"});var Y=s.rows.slice(T*R,T*R+R),q=function(e,t){t[e.name]?function(e,t){return W.apply(this,arguments)}(t.id,e.column_id).then((function(e){200===e&&S().then((function(){return c(!1)}))})):function(e,t){return B.apply(this,arguments)}(t.id,e.column_id).then((function(e){200===e&&S().then((function(){return c(!1)}))}))};return Object(M.jsxs)(f.a,{className:k.root,children:[Object(M.jsx)(g.a,{className:k.container,children:Object(M.jsxs)(b.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(M.jsx)(O.a,{children:Object(M.jsx)(y.a,{children:s.columns.map((function(e){if("id"!==e.column_id)return Object(M.jsx)(j.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.name)}))})}),Object(M.jsx)(v.a,{children:Y.map((function(e){return Object(M.jsx)(y.a,{hover:!0,role:"checkbox",tabIndex:-1,children:s.columns.map((function(t){var n=e[t.name];if("id"!==t.column_id){var r,a="name"!==t.name&&"number"!==t.name;return Object(M.jsx)(j.a,{className:I()((r={},Object(i.a)(r,k.cell,a),Object(i.a)(r,k.rightLine,"name"===t.name),r)),onClick:a?function(){return q(t,e)}:function(){},align:t.align,children:t.format&&"number"===typeof n?t.format(n):n},t.name)}}))},e.id)}))})]})}),Object(M.jsx)(x.a,{rowsPerPageOptions:[25,100],component:"div",count:Y.length,rowsPerPage:R,page:T,onChangePage:function(e,t){_(t)},onChangeRowsPerPage:function(e){U(+e.target.value),_(0)}})]})};var Y=function(){return Object(M.jsx)("div",{className:"App",children:Object(M.jsx)(a.a.Fragment,{children:Object(M.jsx)(u.a,{children:Object(M.jsx)(U,{})})})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,143)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))},z=n(51),G=n(23),K=n(49),Q=n(50),V="schoolboys/SET_SCHOOLBOYS",X=[];var Z="column/SET_COLUMN",$=[];var ee="rate/SET_RATE",te=[];var ne=Object(G.combineReducers)({schoolboys:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===V?r:e},rate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===ee?r:e},column:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;return n===Z?r:e}}),re=Object(G.createStore)(ne,Object(Q.composeWithDevTools)(Object(G.applyMiddleware)(K.a)));o.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(z.a,{store:re,children:Object(M.jsx)(Y,{})})}),document.getElementById("root")),q()}},[[92,1,2]]]);
//# sourceMappingURL=main.eb824fb6.chunk.js.map